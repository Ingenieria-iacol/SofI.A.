<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Entalpia Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f0f2f5; display: flex; align-items: center; justify-content: center; height: 100vh; }
        .card { width: 350px; padding: 20px; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        #btnIngresar { display: none; } /* Oculto por defecto */
    </style>
</head>
<body>

<div class="card text-center">
    <h4 class="mb-4">Entalpia Hub</h4>
    
    <div id="formulario">
        <input type="email" id="email" class="form-control mb-2" placeholder="Correo">
        <input type="password" id="pass" class="form-control mb-3" placeholder="Contraseña">
        <button onclick="validar()" class="btn btn-primary w-100">Verificar</button>
    </div>

    <div id="resultado" class="mt-3">
        <p id="mensaje" class="small text-danger"></p>
        <a id="btnIngresar" href="#" target="_blank" class="btn btn-success w-100">¡INGRESAR A MI CARPETA!</a>
    </div>
</div>

<script>
    // 1. REEMPLAZA CON TU URL DE GOOGLE
    const URL_GOOGLE = "https://script.google.com/macros/s/AKfycby1CIk315RdzZVDETFnYSNez42Tl5XHHV5BBjEoPwV82GW3Lw1Ql139SygtXkX-gTyN/exec";

    function validar() {
        const email = document.getElementById('email').value;
        const pass = document.getElementById('pass').value;
        const mensaje = document.getElementById('mensaje');
        
        // Llamada especial para saltar bloqueos de seguridad
        const script = document.createElement('script');
        script.src = `${URL_GOOGLE}?email=${email}&pass=${pass}&callback=callback`;
        document.body.appendChild(script);
    }

    // 2. Esta función recibe la respuesta de Google
    function callback(res) {
        const btn = document.getElementById('btnIngresar');
        const mensaje = document.getElementById('mensaje');
        
        if (res.exito) {
            mensaje.className = "small text-success";
            mensaje.innerText = "Credenciales correctas.";
            btn.href = res.url;
            btn.style.display = "block"; // Mostrar el botón de ingreso
            document.getElementById('formulario').style.display = "none"; // Ocultar login
        } else {
            mensaje.innerText = "Error: Usuario o clave incorrectos.";
        }
    }
</script>

</body>
</html>
